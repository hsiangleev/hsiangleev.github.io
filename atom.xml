<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>凉宫的博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://hsianglee.xyz/"/>
  <updated>2019-02-12T07:34:13.050Z</updated>
  <id>https://hsianglee.xyz/</id>
  
  <author>
    <name>hsianglee</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>添加图片放大效果和桃心效果</title>
    <link href="https://hsianglee.xyz/2019/02/12/hexo%E9%85%8D%E7%BD%AE/%E5%9B%BE%E7%89%87%E6%94%BE%E5%A4%A7%E6%95%88%E6%9E%9C%E5%92%8C%E6%A1%83%E5%BF%83%E6%95%88%E6%9E%9C/"/>
    <id>https://hsianglee.xyz/2019/02/12/hexo配置/图片放大效果和桃心效果/</id>
    <published>2019-02-12T06:57:30.000Z</published>
    <updated>2019-02-12T07:34:13.050Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --><h3 id="添加图片放大效果和滚动缩放效果"><a href="#添加图片放大效果和滚动缩放效果" class="headerlink" title="添加图片放大效果和滚动缩放效果"></a>添加图片放大效果和滚动缩放效果</h3><hr><ul><li>找到主题文件夹下的目录<code>/source/js/src/post-details.js</code></li><li><p>添加下面代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片放大</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="built_in">document</span>.body).append(<span class="string">'&lt;div class="lee-increase"&gt;&lt;img src=""&gt;&lt;/div&gt;'</span>);</span><br><span class="line">    <span class="keyword">var</span> isShow=<span class="literal">false</span>;</span><br><span class="line">    $(<span class="string">".post-body img"</span>).on(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> src=$(<span class="keyword">this</span>).attr(<span class="string">"src"</span>);</span><br><span class="line">        <span class="keyword">var</span> alt=$(<span class="keyword">this</span>).attr(<span class="string">"alt"</span>);</span><br><span class="line">        $(<span class="string">".lee-increase"</span>).show().children(<span class="string">"img"</span>).attr(<span class="string">"src"</span>, src).attr(<span class="string">"alt"</span>,alt).width(<span class="string">"auto"</span>);</span><br><span class="line">        $(<span class="built_in">document</span>.body).css(<span class="string">"overflow"</span>,<span class="string">"hidden"</span>);</span><br><span class="line">        isShow=<span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">    $(<span class="string">".lee-increase"</span>).on(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).hide();</span><br><span class="line">        $(<span class="built_in">document</span>.body).css(<span class="string">"overflow"</span>,<span class="string">"auto"</span>);</span><br><span class="line">        isShow=<span class="literal">false</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 鼠标滚动放大缩小</span></span><br><span class="line">    $(<span class="built_in">document</span>).on(<span class="string">'mousewheel DOMMouseScroll'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!isShow) <span class="keyword">return</span>;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="keyword">var</span> wheel = e.originalEvent.wheelDelta || -e.originalEvent.detail;</span><br><span class="line">        <span class="keyword">var</span> delta = <span class="built_in">Math</span>.max(<span class="number">-1</span>, <span class="built_in">Math</span>.min(<span class="number">1</span>, wheel) );</span><br><span class="line">        <span class="keyword">var</span> w=$(<span class="string">".lee-increase img"</span>).width();</span><br><span class="line">            <span class="keyword">if</span>(delta&lt;<span class="number">0</span>)&#123;<span class="comment">//向下滚动</span></span><br><span class="line">            $(<span class="string">".lee-increase img"</span>).width(w+<span class="number">50</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//向上滚动</span></span><br><span class="line">            $(<span class="string">".lee-increase img"</span>).width(w<span class="number">-50</span>);</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>找到主题文件夹下的目录<code>/source/css/_custom/custom.styl</code></p></li><li>添加下面代码<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片放大</span></span><br><span class="line">.post-body img&#123;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    cursor: zoom-<span class="keyword">in</span>;</span><br><span class="line">&#125;</span><br><span class="line">.lee-increase&#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: <span class="number">0</span>;</span><br><span class="line">    left: <span class="number">0</span>;</span><br><span class="line">    width: <span class="number">100</span>%;</span><br><span class="line">    height: <span class="number">100</span>%;</span><br><span class="line">    background-color: #333;</span><br><span class="line">    background-color: #333c;</span><br><span class="line">    z-index: <span class="number">99999</span>;</span><br><span class="line">    display: none;</span><br><span class="line">    &amp;&gt;img&#123;</span><br><span class="line">        max-width: <span class="number">90</span>%;</span><br><span class="line">        min-width: <span class="number">20</span>%;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: <span class="number">50</span>%;</span><br><span class="line">        left: <span class="number">50</span>%;</span><br><span class="line">        cursor: pointer;</span><br><span class="line">        cursor: zoom-out;</span><br><span class="line">        transform: translate(<span class="number">-50</span>%, <span class="number">-50</span>%);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="点击出现桃心效果"><a href="#点击出现桃心效果" class="headerlink" title="点击出现桃心效果"></a>点击出现桃心效果</h3><hr><ul><li>在post-details.js后面继续添加代码<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">"left:"</span>+d[e].x+<span class="string">"px;top:"</span>+d[e].y+<span class="string">"px;opacity:"</span>+d[e].alpha+<span class="string">";transform:scale("</span>+d[e].scale+<span class="string">","</span>+d[e].scale+<span class="string">") rotate(45deg);background:"</span>+d[e].color+<span class="string">";z-index:99999"</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">"function"</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"div"</span>);a.className=<span class="string">"heart"</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX<span class="number">-5</span>,<span class="attr">y</span>:e.clientY<span class="number">-5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"style"</span>);a.type=<span class="string">"text/css"</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">"rgb("</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">")"</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;setTimeout(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --&gt;&lt;h3 id=&quot;添加图片放大效果和滚动缩放效果&quot;&gt;&lt;a href=&quot;#添加图片放大效果和滚动缩放效果&quot; class=&quot;headerlink&quot; title=&quot;
      
    
    </summary>
    
      <category term="hexo配置" scheme="https://hsianglee.xyz/categories/hexo%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="hexo图片放大" scheme="https://hsianglee.xyz/tags/hexo%E5%9B%BE%E7%89%87%E6%94%BE%E5%A4%A7/"/>
    
      <category term="hexo桃心效果" scheme="https://hsianglee.xyz/tags/hexo%E6%A1%83%E5%BF%83%E6%95%88%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>自定义域名解析和安装SSL证书</title>
    <link href="https://hsianglee.xyz/2019/02/11/hexo%E9%85%8D%E7%BD%AE/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/"/>
    <id>https://hsianglee.xyz/2019/02/11/hexo配置/自定义域名解析/</id>
    <published>2019-02-11T08:42:30.000Z</published>
    <updated>2019-02-14T08:49:50.144Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --><h3 id="自定义域名解析"><a href="#自定义域名解析" class="headerlink" title="自定义域名解析"></a>自定义域名解析</h3><hr><p><strong>1. 申请域名</strong><br>我是直接在阿里云购买的.xyz为后缀的域名，<a href="https://wanwang.aliyun.com/domain/" target="_blank" rel="noopener">阿里云域名购买</a>。</p><p><strong>2. 添加DNS解析</strong></p><ul><li>进入<a href="https://dns.console.aliyun.com/#/dns/domainList" target="_blank" rel="noopener">阿里云域名解析</a>，可以看到当前购买的域名<img data-original="/images/自定义域名解析/1.png" class="lazy" alt="自定义域名解析"></li><li>点击域名进入域名解析界面<img data-original="/images/自定义域名解析/2.png" class="lazy" alt="自定义域名解析"></li><li>点击添加记录弹出窗口<img data-original="/images/自定义域名解析/3.png" class="lazy" alt="自定义域名解析"></li><li>添加下图的三项记录<img data-original="/images/自定义域名解析/4.png" class="lazy" alt="自定义域名解析"></li></ul><p><strong>3. 添加CNAME文件</strong></p><ul><li>在hexo根目录的source目录新建文件，名为CNAME(无后缀名)，文件内容为域名地址，我的是hsianglee.xyz，所以在文件内直接输入hsianglee.xyz并保存。</li><li>部署hexo网站<code>hexo d -g</code>。</li><li>过几分钟之后再访问域名应该就可以了</li></ul><h3 id="安装SSL证书，使用https访问网站"><a href="#安装SSL证书，使用https访问网站" class="headerlink" title="安装SSL证书，使用https访问网站"></a>安装SSL证书，使用https访问网站</h3><hr><p><strong>1. 证书购买</strong></p><ul><li><a href="https://common-buy.aliyun.com/?spm=5176.2020520154.cas.1.6bcaIrtbIrtbCy&amp;commodityCode=cas#/buy" target="_blank" rel="noopener">网址</a></li><li>选择Symantec购买免费版<img data-original="/images/自定义域名解析/5.png" class="lazy" alt="自定义域名解析"></li><li>购买完成后跳到<a href="https://yundunnext.console.aliyun.com/?spm=a2c1d.8251892.aliyun_sidebar.12.c99f5b76ntHi2S&amp;p=cas#/overview/cn-hangzhou" target="_blank" rel="noopener">SSL证书</a></li></ul><p><strong>2. 申请</strong></p><ul><li>点击申请<img data-original="/images/自定义域名解析/6.png" class="lazy" alt="自定义域名解析">会在右侧弹出<img data-original="/images/自定义域名解析/7.png" class="lazy" alt="自定义域名解析"></li><li>填写完成后点击下一步</li><li><img data-original="/images/自定义域名解析/8.png" class="lazy" alt="自定义域名解析">点击验证之后会自动添加一条域名解析记录，然后点击下面的提交审核。</li><li>审核完成之后会提示为已签发<img data-original="/images/自定义域名解析/9.png" class="lazy" alt="自定义域名解析"></li></ul><p><strong>3. 添加域名解析记录</strong></p><ul><li>在域名解析页面添加四条记录<img data-original="/images/自定义域名解析/10.png" class="lazy" alt="自定义域名解析"></li><li>到github的博客设置里面把Enforce HTTPS 前面的checkbox选中<img data-original="/images/自定义域名解析/11.png" class="lazy" alt="自定义域名解析"></li><li>如果无法选中，则可以删除上面的域名保存之后再重新添加域名，等几分钟之后应该就可以了</li><li>然后使用https访问网站便会出现前面的锁了<img data-original="/images/自定义域名解析/12.png" class="lazy" alt="自定义域名解析"></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --&gt;&lt;h3 id=&quot;自定义域名解析&quot;&gt;&lt;a href=&quot;#自定义域名解析&quot; class=&quot;headerlink&quot; title=&quot;自定义域名解析&quot;&gt;&lt;/a&gt;自定义
      
    
    </summary>
    
      <category term="hexo配置" scheme="https://hsianglee.xyz/categories/hexo%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="域名解析" scheme="https://hsianglee.xyz/tags/%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/"/>
    
      <category term="ssl证书" scheme="https://hsianglee.xyz/tags/ssl%E8%AF%81%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>mongodb操作命令</title>
    <link href="https://hsianglee.xyz/2019/01/29/mongodb/mongodb%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/"/>
    <id>https://hsianglee.xyz/2019/01/29/mongodb/mongodb操作命令/</id>
    <published>2019-01-29T02:46:28.000Z</published>
    <updated>2019-01-30T08:39:55.493Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --><h3 id="set-更新或添加属性"><a href="#set-更新或添加属性" class="headerlink" title="$set 更新或添加属性"></a>$set 更新或添加属性</h3><hr><p><strong>例</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"A"</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"B"</span>,</span><br><span class="line">            <span class="string">"score"</span> : <span class="number">4.0</span>,</span><br><span class="line">            <span class="string">"answers"</span> : [ </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"q"</span> : <span class="number">1.0</span>,</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">0.0</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>添加属性</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$set</span>: &#123;<span class="string">"arr.0.score"</span>: <span class="number">10</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>更新属性</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$set</span>: &#123;<span class="string">"arr.1.score"</span>: <span class="number">10</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"A"</span>,</span><br><span class="line">            <span class="string">"score"</span> : <span class="number">10.0</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"B"</span>,</span><br><span class="line">            <span class="string">"score"</span> : <span class="number">10.0</span>,</span><br><span class="line">            <span class="string">"answers"</span> : [ </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"q"</span> : <span class="number">1.0</span>,</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">0.0</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="unset-删除对象的属性或把数组的其中一项变成null"><a href="#unset-删除对象的属性或把数组的其中一项变成null" class="headerlink" title="$unset 删除对象的属性或把数组的其中一项变成null"></a>$unset 删除对象的属性或把数组的其中一项变成null</h3><hr><p><strong>例</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"A"</span>,</span><br><span class="line">            <span class="string">"score"</span> : <span class="number">5.5</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"B"</span>,</span><br><span class="line">            <span class="string">"score"</span> : <span class="number">4.0</span>,</span><br><span class="line">            <span class="string">"answers"</span> : [ </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"q"</span> : <span class="number">1.0</span>,</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">0.0</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"q"</span> : <span class="number">1.0</span>,</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">0.0</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>删除一个指定的字段</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除arr数组的第一项的score属性</span></span><br><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$unset</span>: &#123;<span class="string">"arr.0.score"</span>: <span class="number">1</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>当匹配到的是数组元素，$unset替换指定的元素为null而不是删除掉指定的元素，此行为保持数组大小和位置不变；</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把数组arr的第二项的answers的第二项的值变为null</span></span><br><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$unset</span>: &#123;<span class="string">"arr.1.answers.1"</span>: <span class="number">1</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"A"</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"item"</span> : <span class="string">"B"</span>,</span><br><span class="line">            <span class="string">"score"</span> : <span class="number">4.0</span>,</span><br><span class="line">            <span class="string">"answers"</span> : [ </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"q"</span> : <span class="number">1.0</span>,</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">0.0</span></span><br><span class="line">                &#125;, </span><br><span class="line">                <span class="literal">null</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="rename-重新命名属性名-不能操作数组"><a href="#rename-重新命名属性名-不能操作数组" class="headerlink" title="$rename 重新命名属性名(不能操作数组)"></a>$rename 重新命名属性名(不能操作数组)</h3><hr><p><strong>例</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"name"</span> : &#123;</span><br><span class="line">        <span class="string">"gge"</span> : <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$rename</span>: &#123;<span class="string">"name.gge"</span>: <span class="string">"name.age"</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"name"</span> : &#123;</span><br><span class="line">        <span class="string">"age"</span> : <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="pop-删除数组中的第一个或者最后一个元素-给-pop传递-1会删除第一个元素传递1会删除最后一个元素"><a href="#pop-删除数组中的第一个或者最后一个元素-给-pop传递-1会删除第一个元素传递1会删除最后一个元素" class="headerlink" title="$pop 删除数组中的第一个或者最后一个元素(给$pop传递-1会删除第一个元素传递1会删除最后一个元素)"></a>$pop 删除数组中的第一个或者最后一个元素(给$pop传递-1会删除第一个元素传递1会删除最后一个元素)</h3><hr><p><strong>例</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">1</span>, </span><br><span class="line">        <span class="number">2</span>, </span><br><span class="line">        <span class="number">3</span>, </span><br><span class="line">        <span class="number">4</span>, </span><br><span class="line">        <span class="number">5</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>删除数组第一个</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$pop</span>: &#123;<span class="string">"arr"</span>: <span class="number">-1</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>删除数组最后一个</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$pop</span>: &#123;<span class="string">"arr"</span>: <span class="number">1</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">2</span>, </span><br><span class="line">        <span class="number">3</span>, </span><br><span class="line">        <span class="number">4</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="pull-删除数组中符合条件的元素"><a href="#pull-删除数组中符合条件的元素" class="headerlink" title="$pull 删除数组中符合条件的元素"></a>$pull 删除数组中符合条件的元素</h3><hr><p><strong>例</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="string">"b"</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">"c"</span>: <span class="number">8</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span>: <span class="number">6</span>,</span><br><span class="line">            <span class="string">"b"</span>: <span class="number">7</span>,</span><br><span class="line">            <span class="string">"c"</span>: <span class="number">8</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>删除数组arr中的a&gt;=5的项</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$pull</span>: &#123;<span class="string">"arr"</span>: &#123;<span class="string">"a"</span>: &#123;<span class="attr">$gte</span>: <span class="number">5</span>&#125;&#125;&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">2</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">5</span>,</span><br><span class="line">            <span class="string">"c"</span> : <span class="number">8</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>使用$elemMatch匹配多个条件</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"c"</span> : [ </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">10</span>,</span><br><span class="line">                    <span class="string">"b"</span> : <span class="number">10</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">15</span>,</span><br><span class="line">                    <span class="string">"b"</span> : <span class="number">15</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"c"</span> : [ </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">20</span>,</span><br><span class="line">                    <span class="string">"b"</span> : <span class="number">20</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">25</span>,</span><br><span class="line">                    <span class="string">"b"</span> : <span class="number">25</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>删除arr数组 中的c数组中 (a=25 &amp;&amp; b=25)</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$pull</span>: &#123;<span class="string">"arr"</span>: &#123;<span class="string">"c"</span>: &#123;<span class="attr">$elemMatch</span>: &#123;<span class="string">"a"</span>: <span class="number">25</span>,<span class="string">"b"</span>:<span class="number">25</span>&#125;&#125;&#125;&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"c"</span> : [ </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">10</span>,</span><br><span class="line">                    <span class="string">"b"</span> : <span class="number">10</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"a"</span> : <span class="number">15</span>,</span><br><span class="line">                    <span class="string">"b"</span> : <span class="number">15</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="push-向已有的数组末尾加入一个元素"><a href="#push-向已有的数组末尾加入一个元素" class="headerlink" title="$push 向已有的数组末尾加入一个元素"></a>$push 向已有的数组末尾加入一个元素</h3><hr><p><strong>例</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">5</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$push</span>: &#123;<span class="string">"arr"</span>: <span class="number">10</span>&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">5</span>, </span><br><span class="line">        <span class="number">10.0</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>使用$position添加到任意位置</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在arr数组第二项插入四项数据</span></span><br><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$push</span>: &#123;<span class="string">"arr"</span>: &#123;<span class="attr">$each</span>: [<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>], <span class="attr">$position</span>: <span class="number">1</span>&#125;&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p></p><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">5</span>, </span><br><span class="line">        <span class="number">15.0</span>, </span><br><span class="line">        <span class="number">16.0</span>, </span><br><span class="line">        <span class="number">17.0</span>, </span><br><span class="line">        <span class="number">18.0</span>, </span><br><span class="line">        <span class="number">10.0</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="sort-数组排序"><a href="#sort-数组排序" class="headerlink" title="$sort 数组排序"></a>$sort 数组排序</h3><hr><p><strong>1为升序排列，-1为降序排列</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">3</span>, </span><br><span class="line">        <span class="number">1</span>, </span><br><span class="line">        <span class="number">5</span>, </span><br><span class="line">        <span class="number">2</span>, </span><br><span class="line">        <span class="number">6</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$push</span>: &#123;<span class="string">"arr"</span>: &#123;<span class="attr">$each</span>: [], <span class="attr">$sort</span>: <span class="number">1</span>&#125;&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">1</span>, </span><br><span class="line">        <span class="number">2</span>, </span><br><span class="line">        <span class="number">3</span>, </span><br><span class="line">        <span class="number">5</span>, </span><br><span class="line">        <span class="number">6</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>2. 根据数组的某一项排序</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">5</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">3</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">2</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">4</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">5</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据数组arr的a属性升序排列</span></span><br><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$push</span>: &#123;<span class="string">"arr"</span>: &#123;<span class="attr">$each</span>: [], <span class="attr">$sort</span>: &#123;<span class="string">"a"</span>: <span class="number">1</span>&#125;&#125;&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">2</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">3</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">4</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">5</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">5</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">6</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="slice-数组截取"><a href="#slice-数组截取" class="headerlink" title="$slice 数组截取"></a>$slice 数组截取</h3><hr><p><strong>正数则从前向后，负数从后向前</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">1</span>, </span><br><span class="line">        <span class="number">2</span>, </span><br><span class="line">        <span class="number">3</span>, </span><br><span class="line">        <span class="number">4</span>, </span><br><span class="line">        <span class="number">5</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 截取数组arr后三位</span></span><br><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$push</span>: &#123;<span class="string">"arr"</span>: &#123;<span class="attr">$each</span>: [], <span class="attr">$slice</span>: <span class="number">-3</span>&#125;&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        <span class="number">3</span>, </span><br><span class="line">        <span class="number">4</span>, </span><br><span class="line">        <span class="number">5</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="占位符-，更新数组的某一项不确定位置的值"><a href="#占位符-，更新数组的某一项不确定位置的值" class="headerlink" title="占位符$，更新数组的某一项不确定位置的值"></a>占位符$，更新数组的某一项不确定位置的值</h3><hr><p><strong>例1</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">20</span> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把数组arr值为20的变成10</span></span><br><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>, <span class="string">"arr"</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$set</span>: &#123;<span class="string">"arr.$"</span>: NumberInt(<span class="number">10</span>)&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">10</span> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>例2</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">1</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">10</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">2</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">20</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">3</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">30</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新数组arr里面属性a为2的，把当前位置的b变成200</span></span><br><span class="line">db.getCollection(<span class="string">'user'</span>).update(</span><br><span class="line">    &#123;<span class="string">"_id"</span>: <span class="number">1.0</span>, <span class="string">"arr.a"</span>: <span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">$set</span>: &#123;<span class="string">"arr.$.b"</span>: NumberInt(<span class="number">200</span>)&#125;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>结果</strong><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"_id"</span> : <span class="number">1.0</span>,</span><br><span class="line">    <span class="string">"arr"</span> : [ </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">1</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">10</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">2</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">200</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"a"</span> : <span class="number">3</span>,</span><br><span class="line">            <span class="string">"b"</span> : <span class="number">30</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --&gt;&lt;h3 id=&quot;set-更新或添加属性&quot;&gt;&lt;a href=&quot;#set-更新或添加属性&quot; class=&quot;headerlink&quot; title=&quot;$set 更新或
      
    
    </summary>
    
      <category term="mongodb" scheme="https://hsianglee.xyz/categories/mongodb/"/>
    
    
      <category term="mongodb" scheme="https://hsianglee.xyz/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>mongodb安装</title>
    <link href="https://hsianglee.xyz/2019/01/29/mongodb/mongodb%E5%AE%89%E8%A3%85/"/>
    <id>https://hsianglee.xyz/2019/01/29/mongodb/mongodb安装/</id>
    <published>2019-01-29T02:46:27.000Z</published>
    <updated>2019-01-30T06:44:43.297Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --><p><strong>1. 进入mongodb\bin目录 =&gt;cmd</strong></p><p><strong>2. 在mongodb目录创建 \data\db</strong></p><p><strong>3. cmd执行<code>mongod.exe --dbpath=D:\mongodb\data\db</code></strong></p><p><strong>4. 在mongodb目录创建 \data\log</strong></p><p><strong>5. cmd执行 <code>mongod.exe --logpath=D:\mongodb\data\log\mongodb.log</code></strong></p><p><strong>6. 在mongodb目录创建配置文件（mongodb.config）</strong></p><p><strong>7. 配置文件内容</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dbpath=D:\mongodb\data\db</span><br><span class="line">logpath=D:\mongodb\data\<span class="built_in">log</span>\mongodb.log</span><br></pre></td></tr></table></figure><p><strong>8. 执行 <code>mongod.exe --config D:\mongodb\mongodb.config</code></strong></p><p><strong>9. 添加到服务 （servies.msc）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod.exe --dbpath=D:\mongodb\data\db --logpath=D:\mongodb\data\<span class="built_in">log</span>\log.txt --install --serviceName <span class="string">"MongoDB"</span></span><br></pre></td></tr></table></figure><p><strong>10. 开启关闭服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net start mongodb</span><br><span class="line">net stop mongodb</span><br><span class="line">sc delete <span class="string">"MongoDB"</span>     <span class="comment"># 删除服务</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;strong&gt;1. 进入mongodb\bin目录 =&amp;gt;cmd&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2. 在mongodb目录创建 
      
    
    </summary>
    
      <category term="mongodb" scheme="https://hsianglee.xyz/categories/mongodb/"/>
    
    
      <category term="mongodb" scheme="https://hsianglee.xyz/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>mongodb数据导入导出</title>
    <link href="https://hsianglee.xyz/2019/01/29/mongodb/mongodb%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/"/>
    <id>https://hsianglee.xyz/2019/01/29/mongodb/mongodb数据导入导出/</id>
    <published>2019-01-29T02:46:26.000Z</published>
    <updated>2019-01-30T06:43:05.290Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --><p><strong>进入mongodb的bin目录</strong></p><p><strong>1. 数据导出</strong></p><ul><li>-d: 数据库名称</li><li>-c: 表名</li><li>-o: 存储路径</li><li>–type: 导出类型</li><li>-f: 导出的数据<br><code>mongoexport -d test -c blog -o G:\users.json --type json -f &quot;_id,data,user&quot;</code></li></ul><p><strong>2. 数据导入</strong></p><ul><li>-d: 数据库名称</li><li>-c: 表名</li><li>–file: 路径</li><li>–type: 导出类型<br><code>mongoimport -d test -c us --file G:\users.json --type json</code></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;strong&gt;进入mongodb的bin目录&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1. 数据导出&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;
      
    
    </summary>
    
      <category term="mongodb" scheme="https://hsianglee.xyz/categories/mongodb/"/>
    
    
      <category term="mongodb" scheme="https://hsianglee.xyz/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>mongodb加密</title>
    <link href="https://hsianglee.xyz/2019/01/29/mongodb/mongodb%E5%8A%A0%E5%AF%86/"/>
    <id>https://hsianglee.xyz/2019/01/29/mongodb/mongodb加密/</id>
    <published>2019-01-29T02:46:25.000Z</published>
    <updated>2019-01-30T06:39:01.176Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --><p><strong>1. 切换到admin数据库</strong></p><p><code>use admin</code></p><p><strong>2. 管理员设置密码</strong></p><p><code>db.createUser({user: &quot;root&quot;,pwd: &quot;123&quot;,roles: [&quot;root&quot;]})</code></p><p><strong>3. 验证是否成功</strong></p><p><code>db.auth(&quot;root&quot;,&quot;123&quot;)</code></p><p><strong>4. 给其它数据库添加用户</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use <span class="built_in">test</span></span><br><span class="line">db.createUser(&#123;user: <span class="string">"hsianglee"</span>,<span class="built_in">pwd</span>: <span class="string">"123"</span>,roles: [&#123;role: <span class="string">"readWrite"</span>,db: <span class="string">"test"</span>&#125;]&#125;)</span><br></pre></td></tr></table></figure><p><strong>5. mongodb.config内容修改</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dbpath=F:\mongodb\data\db --auth</span><br><span class="line">logpath=F:\mongodb\data\<span class="built_in">log</span>\mongodb.log</span><br></pre></td></tr></table></figure><p><strong>6. 重启服务</strong></p><p><code>mongodb.exe --dbpath F:\mongodb\data\db --auth</code></p><p><strong>7. node连接</strong></p><p><code>mongodb://root:123@127.0.0.1:27017/test</code></p><p><strong>8. 其它命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.system.users.find()          <span class="comment"># 查询已添加用户（切换到admin）</span></span><br><span class="line">db.auth(<span class="string">"root"</span>,<span class="string">"123"</span>)           <span class="comment"># 登录认证</span></span><br><span class="line">db.dropUser(<span class="string">"lee"</span>)              <span class="comment"># 删除用户（先切换到当前数据库）</span></span><br><span class="line">db.updateUser(<span class="string">"test"</span>,&#123;user: <span class="string">""</span>,<span class="built_in">pwd</span>: <span class="string">""</span>, roles: [&#123;role: <span class="string">"read"</span>,db: <span class="string">"test"</span>&#125;]&#125;)    <span class="comment"># 修改权限</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Sat Feb 16 2019 10:31:30 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;strong&gt;1. 切换到admin数据库&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;use admin&lt;/code&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;
      
    
    </summary>
    
      <category term="mongodb" scheme="https://hsianglee.xyz/categories/mongodb/"/>
    
    
      <category term="mongodb" scheme="https://hsianglee.xyz/tags/mongodb/"/>
    
  </entry>
  
</feed>
